import{a as y,b as S,c as N,d as V,e as k,f as A,l as W,m as F}from"./chunk-647I7AV7.js";import{a as R}from"./chunk-57J56NDR.js";import{f as P,h as O}from"./chunk-22BB62GF.js";import{$ as l,Ab as _,Bb as w,Ia as a,Ma as p,Nb as E,Ra as M,Va as b,Zb as D,aa as u,ac as I,cb as g,db as o,eb as i,ib as v,jb as x,kb as c,rb as C,ub as d,wb as h,zb as f}from"./chunk-VO2ANZID.js";function B(r,m){r&1&&(o(0,"div",6),d(1," \u05D8\u05D5\u05E2\u05DF \u05E0\u05EA\u05D5\u05E0\u05D9 \u05DB\u05EA\u05D1\u05D4... "),i())}function z(r,m){if(r&1&&(o(0,"div",7),d(1),i()),r&2){let e=c();a(),h(" ",e.error," ")}}function j(r,m){if(r&1&&(o(0,"div",23),d(1),i()),r&2){let e=c(2);a(),h(" ",e.message," ")}}function L(r,m){if(r&1){let e=v();o(0,"div",8)(1,"form",9,0),x("ngSubmit",function(){l(e);let n=C(2),s=c();return u(s.onSubmit(n))}),o(3,"div",10)(4,"label",11),d(5,"\u05DB\u05D5\u05EA\u05E8\u05EA:"),i(),o(6,"input",12),w("ngModelChange",function(n){l(e);let s=c();return _(s.newsItem.title,n)||(s.newsItem.title=n),u(n)}),i()(),o(7,"div",10)(8,"label",13),d(9,"\u05EA\u05D9\u05D0\u05D5\u05E8 \u05E7\u05E6\u05E8:"),i(),o(10,"textarea",14),w("ngModelChange",function(n){l(e);let s=c();return _(s.newsItem.description,n)||(s.newsItem.description=n),u(n)}),i()(),o(11,"div",10)(12,"label",15),d(13,"\u05EA\u05D5\u05DB\u05DF \u05DE\u05DC\u05D0:"),i(),o(14,"textarea",16),w("ngModelChange",function(n){l(e);let s=c();return _(s.newsItem.full_content,n)||(s.newsItem.full_content=n),u(n)}),i()(),o(15,"div",10)(16,"label",17),d(17,"\u05DB\u05EA\u05D5\u05D1\u05EA \u05EA\u05DE\u05D5\u05E0\u05D4 (URL):"),i(),o(18,"input",18),w("ngModelChange",function(n){l(e);let s=c();return _(s.newsItem.image_url,n)||(s.newsItem.image_url=n),u(n)}),i()(),o(19,"div",19)(20,"button",20),d(21,"\u05E9\u05DE\u05D5\u05E8 \u05E9\u05D9\u05E0\u05D5\u05D9\u05D9\u05DD"),i(),o(22,"button",21),x("click",function(){l(e);let n=c();return u(n.onCancel())}),d(23,"\u05D1\u05D9\u05D8\u05D5\u05DC"),i()(),b(24,j,2,1,"div",22),i()()}if(r&2){let e=C(2),t=c();a(6),f("ngModel",t.newsItem.title),a(4),f("ngModel",t.newsItem.description),a(4),f("ngModel",t.newsItem.full_content),a(4),f("ngModel",t.newsItem.image_url),a(2),g("disabled",!e.valid),a(4),g("ngIf",t.message)}}var T=class r{constructor(m,e,t,n){this.route=m;this.router=e;this.newsService=t;this.cdr=n}newsItem=null;loading=!0;error="";message="";ngOnInit(){this.loading=!0,this.error="",this.message="",this.route.paramMap.subscribe(m=>{let e=m.get("id");e?this.newsService.getNewsItemById(e).subscribe({next:t=>{this.newsItem=t,this.loading=!1,this.cdr.detectChanges()},error:t=>{console.error("Error fetching news item for edit:",t),this.error="\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D8\u05E2\u05D9\u05E0\u05EA \u05D4\u05DB\u05EA\u05D1\u05D4 \u05DC\u05E2\u05E8\u05D9\u05DB\u05D4.",this.loading=!1}}):(this.error="\u05DE\u05D6\u05D4\u05D4 \u05DB\u05EA\u05D1\u05D4 \u05DC\u05D0 \u05E0\u05DE\u05E6\u05D0 \u05DC\u05E2\u05E8\u05D9\u05DB\u05D4.",this.loading=!1)})}onSubmit(m){m.valid&&this.newsItem&&this.newsItem.id?(this.message="",this.newsService.updateNewsItem(this.newsItem.id,this.newsItem).subscribe({next:e=>{this.message="\u05D4\u05DB\u05EA\u05D1\u05D4 \u05E2\u05D5\u05D3\u05DB\u05E0\u05D4 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4!",this.router.navigate(["/news",this.newsItem.id]),this.cdr.detectChanges()},error:e=>{console.error("Error updating news item:",e),this.message=e.error?.message||"\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E2\u05D3\u05DB\u05D5\u05DF \u05D4\u05DB\u05EA\u05D1\u05D4.",this.error=this.message}})):this.message="\u05D0\u05E0\u05D0 \u05DE\u05DC\u05D0 \u05D0\u05EA \u05DB\u05DC \u05D4\u05E9\u05D3\u05D5\u05EA \u05D4\u05E0\u05D3\u05E8\u05E9\u05D9\u05DD."}onCancel(){this.newsItem&&this.newsItem.id?this.router.navigate(["/news",this.newsItem.id]):this.router.navigate(["/news"])}static \u0275fac=function(e){return new(e||r)(p(P),p(O),p(R),p(E))};static \u0275cmp=M({type:r,selectors:[["app-news-edit"]],decls:6,vars:3,consts:[["newsForm","ngForm"],[1,"news-edit-container"],[1,"page-title"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","edit-form-wrapper",4,"ngIf"],[1,"loading-message"],[1,"error-message"],[1,"edit-form-wrapper"],[3,"ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","3",3,"ngModelChange","ngModel"],["for","full_content"],["id","full_content","name","full_content","rows","10","required","",3,"ngModelChange","ngModel"],["for","image_url"],["type","url","id","image_url","name","image_url",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"submit-button",3,"disabled"],["type","button",1,"cancel-button",3,"click"],["class","form-message",4,"ngIf"],[1,"form-message"]],template:function(e,t){e&1&&(o(0,"div",1)(1,"h2",2),d(2,"\u05E2\u05E8\u05D9\u05DB\u05EA \u05D7\u05D3\u05E9\u05D5\u05EA"),i(),b(3,B,2,0,"div",3)(4,z,2,1,"div",4)(5,L,25,6,"div",5),i()),e&2&&(a(3),g("ngIf",t.loading),a(),g("ngIf",t.error),a(),g("ngIf",!t.loading&&!t.error&&t.newsItem))},dependencies:[I,D,F,A,y,S,N,W,k,V],styles:[".news-edit-container[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:1.5rem;background-color:#f7fafc;border-radius:12px;box-shadow:0 5px 15px #0000001a;direction:rtl;text-align:right;font-family:Inter,sans-serif}.page-title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,5vw,2.5rem);color:#2d3748;margin-bottom:1.5rem;font-weight:700;text-align:center;border-bottom:2px solid #3498db;padding-bottom:.8rem}.loading-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .form-message[_ngcontent-%COMP%]{text-align:center;padding:15px;margin:15px 0;border-radius:8px;font-size:1em}.loading-message[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#00796b;border:1px solid #b2ebf2}.error-message[_ngcontent-%COMP%]{background-color:#ffe0b2;color:#e65100;border:1px solid #ffcc80}.form-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.edit-form-wrapper[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000d}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:700;color:#4a5568}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #cbd5e0;border-radius:8px;font-size:1rem;box-sizing:border-box;direction:rtl;text-align:right}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db33}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.submit-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:background-color .3s ease,transform .2s ease}.submit-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838;transform:translateY(-2px)}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#a0aec0;cursor:not-allowed}.cancel-button[_ngcontent-%COMP%]{background-color:#e2e8f0;color:#4a5568}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#cbd5e0;transform:translateY(-2px)}@media (max-width: 768px){.news-edit-container[_ngcontent-%COMP%]{padding:1rem;margin:1rem auto}.page-title[_ngcontent-%COMP%]{font-size:clamp(1.6rem,6vw,2.2rem)}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem}.submit-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%}}"]})};export{T as NewsEditComponent};
