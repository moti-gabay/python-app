import{a as N}from"./chunk-QIK4J3BX.js";import{a as O,b as S,c as T,d as V,e as k,f as A,l as W,m as F}from"./chunk-WFA6KPOK.js";import{f as y,h as P}from"./chunk-M2AP7PFC.js";import{$ as c,Ab as _,Bb as f,Ia as d,Ma as x,Nb as D,Ra as M,Va as b,Zb as I,aa as u,ac as w,cb as g,db as o,eb as n,ib as v,jb as C,kb as s,rb as E,ub as m,wb as h,zb as p}from"./chunk-NERK7KHH.js";function B(a,l){a&1&&(o(0,"div",6),m(1," \u05D8\u05D5\u05E2\u05DF \u05E0\u05EA\u05D5\u05E0\u05D9 \u05E4\u05E8\u05D9\u05D8 \u05DE\u05E1\u05D5\u05E8\u05EA... "),n())}function z(a,l){if(a&1&&(o(0,"div",7),m(1),n()),a&2){let t=s();d(),h(" ",t.error," ")}}function L(a,l){if(a&1&&(o(0,"div",25),m(1),n()),a&2){let t=s(2);d(),h(" ",t.message," ")}}function j(a,l){if(a&1){let t=v();o(0,"div",8)(1,"form",9,0),C("ngSubmit",function(){c(t);let i=E(2),r=s();return u(r.onSubmit(i))}),o(3,"div",10)(4,"label",11),m(5,"\u05DB\u05D5\u05EA\u05E8\u05EA:"),n(),o(6,"input",12),f("ngModelChange",function(i){c(t);let r=s();return _(r.traditionItem.title,i)||(r.traditionItem.title=i),u(i)}),n()(),o(7,"div",10)(8,"label",13),m(9,"\u05EA\u05D9\u05D0\u05D5\u05E8 \u05E7\u05E6\u05E8:"),n(),o(10,"textarea",14),f("ngModelChange",function(i){c(t);let r=s();return _(r.traditionItem.short_description,i)||(r.traditionItem.short_description=i),u(i)}),n()(),o(11,"div",10)(12,"label",15),m(13,"\u05EA\u05D5\u05DB\u05DF \u05DE\u05DC\u05D0:"),n(),o(14,"textarea",16),f("ngModelChange",function(i){c(t);let r=s();return _(r.traditionItem.full_content,i)||(r.traditionItem.full_content=i),u(i)}),n()(),o(15,"div",10)(16,"label",17),m(17,"\u05E7\u05D8\u05D2\u05D5\u05E8\u05D9\u05D4:"),n(),o(18,"input",18),f("ngModelChange",function(i){c(t);let r=s();return _(r.traditionItem.category,i)||(r.traditionItem.category=i),u(i)}),n()(),o(19,"div",10)(20,"label",19),m(21,"\u05DB\u05EA\u05D5\u05D1\u05EA \u05EA\u05DE\u05D5\u05E0\u05D4 (URL):"),n(),o(22,"input",20),f("ngModelChange",function(i){c(t);let r=s();return _(r.traditionItem.image_url,i)||(r.traditionItem.image_url=i),u(i)}),n()(),o(23,"div",21)(24,"button",22),m(25,"\u05E9\u05DE\u05D5\u05E8 \u05E9\u05D9\u05E0\u05D5\u05D9\u05D9\u05DD"),n(),o(26,"button",23),C("click",function(){c(t);let i=s();return u(i.onCancel())}),m(27,"\u05D1\u05D9\u05D8\u05D5\u05DC"),n()(),b(28,L,2,1,"div",24),n()()}if(a&2){let t=E(2),e=s();d(6),p("ngModel",e.traditionItem.title),d(4),p("ngModel",e.traditionItem.short_description),d(4),p("ngModel",e.traditionItem.full_content),d(4),p("ngModel",e.traditionItem.category),d(4),p("ngModel",e.traditionItem.image_url),d(2),g("disabled",!t.valid),d(4),g("ngIf",e.message)}}var R=class a{constructor(l,t,e,i){this.route=l;this.router=t;this.traditionService=e;this.cdr=i}traditionItem=null;loading=!0;error="";message="";ngOnInit(){this.loading=!0,this.error="",this.message="",this.route.paramMap.subscribe(l=>{let t=l.get("id");t?this.traditionService.getTraditionItemById(t).subscribe({next:e=>{this.traditionItem=e,this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Error fetching tradition item for edit:",e),this.error="\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D8\u05E2\u05D9\u05E0\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA \u05DC\u05E2\u05E8\u05D9\u05DB\u05D4.",this.loading=!1}}):(this.error="\u05DE\u05D6\u05D4\u05D4 \u05E4\u05E8\u05D9\u05D8 \u05DE\u05E1\u05D5\u05E8\u05EA \u05DC\u05D0 \u05E0\u05DE\u05E6\u05D0 \u05DC\u05E2\u05E8\u05D9\u05DB\u05D4.",this.loading=!1)})}onSubmit(l){l.valid&&this.traditionItem&&this.traditionItem.id?(this.message="",this.traditionService.updateTraditionItem(this.traditionItem.id,this.traditionItem).subscribe({next:t=>{this.message="\u05E4\u05E8\u05D9\u05D8 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA \u05E2\u05D5\u05D3\u05DB\u05DF \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4!",this.router.navigate(["/tradition",this.traditionItem.id])},error:t=>{console.error("Error updating tradition item:",t),this.message=t.error?.message||"\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E2\u05D3\u05DB\u05D5\u05DF \u05E4\u05E8\u05D9\u05D8 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA.",this.error=this.message}})):this.message="\u05D0\u05E0\u05D0 \u05DE\u05DC\u05D0 \u05D0\u05EA \u05DB\u05DC \u05D4\u05E9\u05D3\u05D5\u05EA \u05D4\u05E0\u05D3\u05E8\u05E9\u05D9\u05DD."}onCancel(){this.traditionItem&&this.traditionItem.id?this.router.navigate(["/tradition",this.traditionItem.id]):this.router.navigate(["/tradition"])}static \u0275fac=function(t){return new(t||a)(x(y),x(P),x(N),x(D))};static \u0275cmp=M({type:a,selectors:[["app-tradition-edit"]],decls:6,vars:3,consts:[["traditionForm","ngForm"],[1,"tradition-edit-container"],[1,"page-title"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","edit-form-wrapper",4,"ngIf"],[1,"loading-message"],[1,"error-message"],[1,"edit-form-wrapper"],[3,"ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","required","",3,"ngModelChange","ngModel"],["for","short_description"],["id","short_description","name","short_description","rows","3",3,"ngModelChange","ngModel"],["for","full_content"],["id","full_content","name","full_content","rows","10","required","",3,"ngModelChange","ngModel"],["for","category"],["type","text","id","category","name","category",3,"ngModelChange","ngModel"],["for","image_url"],["type","url","id","image_url","name","image_url",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"submit-button",3,"disabled"],["type","button",1,"cancel-button",3,"click"],["class","form-message",4,"ngIf"],[1,"form-message"]],template:function(t,e){t&1&&(o(0,"div",1)(1,"h2",2),m(2,"\u05E2\u05E8\u05D9\u05DB\u05EA \u05E4\u05E8\u05D9\u05D8 \u05DE\u05E1\u05D5\u05E8\u05EA"),n(),b(3,B,2,0,"div",3)(4,z,2,1,"div",4)(5,j,29,7,"div",5),n()),t&2&&(d(3),g("ngIf",e.loading),d(),g("ngIf",e.error),d(),g("ngIf",!e.loading&&!e.error&&e.traditionItem))},dependencies:[w,I,F,A,O,S,T,W,k,V],styles:[".tradition-edit-container[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:1.5rem;background-color:#f7fafc;border-radius:12px;box-shadow:0 5px 15px #0000001a;direction:rtl;text-align:right;font-family:Inter,sans-serif}.page-title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,5vw,2.5rem);color:#2d3748;margin-bottom:1.5rem;font-weight:700;text-align:center;border-bottom:2px solid #3498db;padding-bottom:.8rem}.loading-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .form-message[_ngcontent-%COMP%]{text-align:center;padding:15px;margin:15px 0;border-radius:8px;font-size:1em}.loading-message[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#00796b;border:1px solid #b2ebf2}.error-message[_ngcontent-%COMP%]{background-color:#ffe0b2;color:#e65100;border:1px solid #ffcc80}.form-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.edit-form-wrapper[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000d}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:700;color:#4a5568}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #cbd5e0;border-radius:8px;font-size:1rem;box-sizing:border-box;direction:rtl;text-align:right}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db33}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.submit-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:background-color .3s ease,transform .2s ease}.submit-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838;transform:translateY(-2px)}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#a0aec0;cursor:not-allowed}.cancel-button[_ngcontent-%COMP%]{background-color:#e2e8f0;color:#4a5568}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#cbd5e0;transform:translateY(-2px)}@media (max-width: 768px){.tradition-edit-container[_ngcontent-%COMP%]{padding:1rem;margin:1rem auto}.page-title[_ngcontent-%COMP%]{font-size:clamp(1.6rem,6vw,2.2rem)}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem}.submit-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%}}"]})};export{R as TraditionEditComponent};
