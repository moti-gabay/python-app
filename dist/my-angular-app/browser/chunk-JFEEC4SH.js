import{a as S,b as I,e as A,l as R,m as P}from"./chunk-IDXLZWUS.js";import{a as O}from"./chunk-TKWG22UM.js";import{h as v}from"./chunk-3CW4HTJF.js";import{$ as f,Ab as p,Bb as c,C as M,Ia as s,Ma as C,Ra as w,Va as E,Zb as y,aa as D,ac as L,cb as g,db as o,eb as r,ib as _,jb as x,kb as d,ub as l,vb as h,wb as b,zb as m}from"./chunk-EYTP6OYD.js";function z(t,n){t&1&&(o(0,"label",16),l(1,"\u05E9\u05DD \u05DE\u05DC\u05D0:"),r())}function W(t,n){if(t&1){let e=_();o(0,"input",17),c("ngModelChange",function(u){f(e);let a=d();return p(a.userData.full_name,u)||(a.userData.full_name=u),D(u)}),r()}if(t&2){let e=d();m("ngModel",e.userData.full_name)}}function k(t,n){t&1&&(o(0,"label",18),l(1,"\u05EA\u05E2\u05D5\u05D3\u05EA \u05D6\u05D4\u05D5\u05EA:"),r())}function B(t,n){if(t&1){let e=_();o(0,"input",19),c("ngModelChange",function(u){f(e);let a=d();return p(a.userData.tz,u)||(a.userData.tz=u),D(u)}),r()}if(t&2){let e=d();m("ngModel",e.userData.tz)}}function V(t,n){t&1&&(o(0,"label",20),l(1,"\u05DB\u05EA\u05D5\u05D1\u05EA:"),r())}function q(t,n){if(t&1){let e=_();o(0,"input",21),c("ngModelChange",function(u){f(e);let a=d();return p(a.userData.address,u)||(a.userData.address=u),D(u)}),r()}if(t&2){let e=d();m("ngModel",e.userData.address)}}function F(t,n){if(t&1&&(o(0,"div",22),l(1),r()),t&2){let e=d();s(),h(e.errorMessage)}}function N(t,n){if(t&1&&(o(0,"div",23),l(1),r()),t&2){let e=d();s(),h(e.successMessage)}}var T=class t{constructor(n,e){this.authService=n;this.router=e}isLoginMode=!0;userData={full_name:"",tz:"",email:"",address:"",password:""};errorMessage="";successMessage="";ngOnInit(){this.authService.isLoggedIn$.pipe(M(1)).subscribe(n=>{n&&this.authService.currentUser$.pipe(M(1)).subscribe(e=>{e&&(e.role==="admin"||e.role==="member"?this.router.navigate(["/files"]):e.role==="user"&&this.router.navigate(["/homepage"]))})})}toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage="",this.successMessage="",this.resetUserData()}onSubmit(){this.errorMessage="",this.successMessage="",this.isLoginMode?this.authService.login(this.userData).subscribe({next:n=>{n?n.role==="admin"||n.role==="member"?this.router.navigate(["/files"]):n.role==="user"&&this.router.navigate(["/homepage"]):this.errorMessage="\u05D4\u05EA\u05D7\u05D1\u05E8\u05D5\u05EA \u05D4\u05E6\u05DC\u05D9\u05D7\u05D4 \u05D0\u05DA \u05DC\u05D0 \u05E0\u05D9\u05EA\u05DF \u05DC\u05D0\u05D7\u05D6\u05E8 \u05E4\u05E8\u05D8\u05D9 \u05DE\u05E9\u05EA\u05DE\u05E9. \u05E0\u05E1\u05D4 \u05DC\u05E8\u05E2\u05E0\u05DF."},error:n=>{this.errorMessage=n.error?.message||"\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D4\u05EA\u05D7\u05D1\u05E8\u05D5\u05EA.",console.error("LoginRegisterComponent: Login error:",n)}}):this.authService.register(this.userData).subscribe({next:()=>{this.successMessage="\u05E0\u05E8\u05E9\u05DE\u05EA \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4! \u05DB\u05E2\u05EA \u05D4\u05EA\u05D7\u05D1\u05E8.",this.isLoginMode=!0,this.resetUserData()},error:n=>{this.errorMessage=n.error?.message||"\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D4\u05E8\u05E9\u05DE\u05D4.",console.error("LoginRegisterComponent: Register error:",n)}})}resetUserData(){this.userData={full_name:"",tz:"",email:"",address:"",password:""}}static \u0275fac=function(e){return new(e||t)(C(O),C(v))};static \u0275cmp=w({type:t,selectors:[["app-login-register"]],decls:22,vars:13,consts:[[1,"login-register-container"],[1,"input-fields-container"],["for","full_name",4,"ngIf"],["type","text","id","full_name","name","full_name","class","input-field","placeholder","\u05E9\u05DD \u05DE\u05DC\u05D0","required","",3,"ngModel","ngModelChange",4,"ngIf"],["for","tz",4,"ngIf"],["type","text","id","tz","name","tz","class","input-field","placeholder","\u05EA\u05E2\u05D5\u05D3\u05EA \u05D6\u05D4\u05D5\u05EA","required","",3,"ngModel","ngModelChange",4,"ngIf"],["for","address",4,"ngIf"],["type","text","id","address","name","address","class","input-field","placeholder","\u05DB\u05EA\u05D5\u05D1\u05EA","required","",3,"ngModel","ngModelChange",4,"ngIf"],["for","email"],["type","email","id","email","name","email","placeholder","\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC","required","",1,"input-field",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","placeholder","\u05E1\u05D9\u05E1\u05DE\u05D4","required","",1,"input-field","last-input-field",3,"ngModelChange","ngModel"],[1,"login-register-button",3,"click"],[1,"toggle-mode-text",3,"click"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["for","full_name"],["type","text","id","full_name","name","full_name","placeholder","\u05E9\u05DD \u05DE\u05DC\u05D0","required","",1,"input-field",3,"ngModelChange","ngModel"],["for","tz"],["type","text","id","tz","name","tz","placeholder","\u05EA\u05E2\u05D5\u05D3\u05EA \u05D6\u05D4\u05D5\u05EA","required","",1,"input-field",3,"ngModelChange","ngModel"],["for","address"],["type","text","id","address","name","address","placeholder","\u05DB\u05EA\u05D5\u05D1\u05EA","required","",1,"input-field",3,"ngModelChange","ngModel"],[1,"error-message"],[1,"success-message"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h2"),l(2),r(),o(3,"div",1),E(4,z,2,0,"label",2)(5,W,1,1,"input",3)(6,k,2,0,"label",4)(7,B,1,1,"input",5)(8,V,2,0,"label",6)(9,q,1,1,"input",7),o(10,"label",8),l(11,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC:"),r(),o(12,"input",9),c("ngModelChange",function(a){return p(i.userData.email,a)||(i.userData.email=a),a}),r(),o(13,"label",10),l(14,"\u05E1\u05D9\u05E1\u05DE\u05D4:"),r(),o(15,"input",11),c("ngModelChange",function(a){return p(i.userData.password,a)||(i.userData.password=a),a}),r()(),o(16,"button",12),x("click",function(){return i.onSubmit()}),l(17),r(),o(18,"p",13),x("click",function(){return i.toggleMode()}),l(19),r(),E(20,F,2,1,"div",14)(21,N,2,1,"div",15),r()),e&2&&(s(2),h(i.isLoginMode?"\u05D4\u05EA\u05D7\u05D1\u05E8\u05D5\u05EA \u05DC\u05D0\u05EA\u05E8":"\u05D4\u05E8\u05E9\u05DE\u05D4"),s(2),g("ngIf",!i.isLoginMode),s(),g("ngIf",!i.isLoginMode),s(),g("ngIf",!i.isLoginMode),s(),g("ngIf",!i.isLoginMode),s(),g("ngIf",!i.isLoginMode),s(),g("ngIf",!i.isLoginMode),s(3),m("ngModel",i.userData.email),s(3),m("ngModel",i.userData.password),s(2),b(" ",i.isLoginMode?"\u05D4\u05EA\u05D7\u05D1\u05E8":"\u05D4\u05D9\u05E8\u05E9\u05DD"," "),s(2),b(" ",i.isLoginMode?"\u05D0\u05D9\u05DF \u05DC\u05DA \u05D7\u05E9\u05D1\u05D5\u05DF? \u05D4\u05D9\u05E8\u05E9\u05DD \u05DB\u05D0\u05DF":"\u05D9\u05E9 \u05DC\u05DA \u05DB\u05D1\u05E8 \u05D7\u05E9\u05D1\u05D5\u05DF? \u05D4\u05EA\u05D7\u05D1\u05E8 \u05DB\u05D0\u05DF"," "),s(),g("ngIf",i.errorMessage),s(),g("ngIf",i.successMessage))},dependencies:[L,y,P,S,I,R,A],styles:[".login-register-container[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem;background-color:#f3f4f6;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;max-width:24rem;margin-left:auto;margin-right:auto;font-family:Inter,sans-serif}.login-register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937;margin-bottom:1.5rem;text-align:center}.input-fields-container[_ngcontent-%COMP%]{margin-bottom:1rem}.input-fields-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#374151;font-size:.875rem;font-weight:700;margin-bottom:.5rem}.input-field[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;appearance:none;border-width:1px;border-color:#d1d5db;border-radius:.25rem;width:100%;padding:.5rem .75rem;color:#374151;line-height:1.25;outline:none;margin-bottom:.5rem;transition:box-shadow .15s ease-in-out}.input-field[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f680;border-color:#3b82f6}.last-input-field[_ngcontent-%COMP%]{margin-bottom:1rem}.login-register-button[_ngcontent-%COMP%]{width:100%;background-color:#0b0e12;color:#fff;font-weight:700;padding:.5rem 1rem;border-radius:9999px;outline:none;border:none;cursor:pointer;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1);box-shadow:0 0 0 3px #3e517080;margin-top:.5rem}.login-register-button[_ngcontent-%COMP%]:hover{background-color:#3e4359}.toggle-mode-text[_ngcontent-%COMP%]{text-align:center;font-size:.875rem;color:#4b5563;margin-top:1rem;cursor:pointer}.toggle-mode-text[_ngcontent-%COMP%]:hover{color:#3b82f6}.error-message[_ngcontent-%COMP%]{color:#ef4444;text-align:center;margin-top:.75rem}.success-message[_ngcontent-%COMP%]{color:#22c55e;text-align:center;margin-top:.75rem}"]})};export{T as LoginRegisterComponent};
