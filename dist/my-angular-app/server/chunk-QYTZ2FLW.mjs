import './polyfills.server.mjs';
import{a as V}from"./chunk-KLYOUEEC.mjs";import{a as z}from"./chunk-STC5UBTG.mjs";import{f as k,m as A}from"./chunk-JZSEUXEZ.mjs";import{Fa as I,Ga as v,Gb as b,Gc as F,Ja as i,Na as _,Sa as O,Vb as P,Wa as l,Y as p,Z as f,fb as a,gb as r,hb as o,ib as E,jb as s,kb as g,lb as D,mb as x,n as T,nb as d,oc as S,pc as w,sc as y,vb as M,xb as c,yb as C,zb as h}from"./chunk-6QFCJR4J.mjs";import"./chunk-T55IDOPT.mjs";var B=e=>["/tradition",e],H=e=>["/edit-tradition",e];function R(e,n){e&1&&(r(0,"div",5)(1,"p"),c(2,"\u05D8\u05D5\u05E2\u05DF \u05E4\u05E8\u05D9\u05D8\u05D9 \u05DE\u05E1\u05D5\u05E8\u05EA... \u05D0\u05E0\u05D0 \u05D4\u05DE\u05EA\u05DF."),o()())}function $(e,n){if(e&1){let t=D();r(0,"div",6)(1,"p"),c(2),o(),r(3,"button",7),x("click",function(){p(t);let m=d();return f(m.fetchTraditionItems())}),c(4,"\u05E0\u05E1\u05D4 \u05E9\u05D5\u05D1"),o()()}if(e&2){let t=d();i(2),C(t.error)}}function N(e,n){e&1&&(r(0,"div",9)(1,"p"),c(2,"\u05D0\u05D9\u05DF \u05E4\u05E8\u05D9\u05D8\u05D9 \u05DE\u05E1\u05D5\u05E8\u05EA \u05D6\u05DE\u05D9\u05E0\u05D9\u05DD \u05DB\u05E8\u05D2\u05E2."),o()())}function U(e,n){if(e&1&&(r(0,"p"),c(1),o()),e&2){let t=d(3);i(),C(t.selectedTraditionItem.short_description)}}function W(e,n){e&1&&(r(0,"p"),c(1,"\u05D1\u05D7\u05E8 \u05E0\u05D5\u05E9\u05D0 \u05DE\u05D4\u05D8\u05D0\u05D1\u05D9\u05DD \u05DC\u05DE\u05D8\u05D4 \u05DB\u05D3\u05D9 \u05DC\u05DC\u05DE\u05D5\u05D3 \u05E2\u05DC\u05D9\u05D5 \u05D9\u05D5\u05EA\u05E8."),o())}function Y(e,n){if(e&1){let t=D();r(0,"button",7),x("click",function(){let m=p(t).$implicit,j=d(3);return f(j.selectTopic(m.id))}),c(1),o()}if(e&2){let t=n.$implicit,u=d(3);M("active",(u.selectedTraditionItem==null?null:u.selectedTraditionItem.id)===t.id),i(),h(" ",t.title," ")}}function q(e,n){if(e&1&&(r(0,"p"),c(1),o()),e&2){let t=d(4);i(),h(" ",t.selectedTraditionItem.full_content," ")}}function G(e,n){e&1&&(r(0,"p"),c(1,"\u05D0\u05D9\u05DF \u05EA\u05D5\u05DB\u05DF \u05DE\u05DC\u05D0 \u05D6\u05DE\u05D9\u05DF \u05DC\u05E4\u05E8\u05D9\u05D8 \u05D6\u05D4."),o())}function J(e,n){if(e&1){let t=D();s(0),r(1,"a",20),c(2,"\u05E2\u05E8\u05D5\u05DA"),o(),r(3,"button",21),x("click",function(){p(t);let m=d(4);return f(m.deleteTraditionItem(m.selectedTraditionItem.id))}),c(4,"\u05DE\u05D7\u05E7"),o(),g()}if(e&2){let t=d(4);i(),a("routerLink",b(1,H,t.selectedTraditionItem.id))}}function K(e,n){if(e&1&&(s(0),r(1,"h3"),c(2),o(),E(3,"div",17),l(4,q,2,1,"p",4)(5,G,2,0,"p",4),r(6,"div",18)(7,"a",19),c(8," \u05DC\u05DB\u05EA\u05D1\u05D4 \u05D4\u05DE\u05DC\u05D0\u05D4 \u2192 "),o(),l(9,J,5,3,"ng-container",4),o(),g()),e&2){let t=d(3);i(2),C(t.selectedTraditionItem.title),i(),a("innerHTML",t.safeFullContent,I),i(),a("ngIf",!t.safeFullContent&&t.selectedTraditionItem.full_content),i(),a("ngIf",!t.selectedTraditionItem.full_content),i(2),a("routerLink",b(6,B,t.selectedTraditionItem.id)),i(2),a("ngIf",t.isAdmin)}}function Q(e,n){e&1&&(s(0),r(1,"p"),c(2,"\u05D1\u05D7\u05E8 \u05E0\u05D5\u05E9\u05D0 \u05DE\u05D4\u05D8\u05D0\u05D1\u05D9\u05DD \u05DC\u05DE\u05E2\u05DC\u05D4 \u05DB\u05D3\u05D9 \u05DC\u05E8\u05D0\u05D5\u05EA \u05D0\u05EA \u05D4\u05EA\u05D5\u05DB\u05DF \u05D4\u05DE\u05DC\u05D0."),o(),g())}function X(e,n){if(e&1&&(s(0),r(1,"h2"),c(2,"\u05D1\u05E7\u05E6\u05E8\u05D4... "),o(),r(3,"div",10)(4,"div",11),l(5,U,2,1,"p",4)(6,W,2,0,"p",4),o(),r(7,"div",12),E(8,"img",13),o()(),r(9,"div",14),l(10,Y,2,3,"button",15),o(),r(11,"div",16),l(12,K,10,8,"ng-container",4)(13,Q,3,0,"ng-container",4),o(),g()),e&2){let t=d(2);i(5),a("ngIf",t.selectedTraditionItem),i(),a("ngIf",!t.selectedTraditionItem),i(2),a("src",t.getFullImageUrl(t.selectedTraditionItem==null?null:t.selectedTraditionItem.image_url),v)("alt",(t.selectedTraditionItem==null?null:t.selectedTraditionItem.title)||"\u05DC\u05D5\u05D2\u05D5 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA \u05D4\u05D9\u05D4\u05D5\u05D3\u05D9\u05EA"),i(2),a("ngForOf",t.traditionItems),i(2),a("ngIf",t.selectedTraditionItem),i(),a("ngIf",!t.selectedTraditionItem)}}function Z(e,n){if(e&1&&(s(0),l(1,N,3,0,"div",8)(2,X,14,7,"ng-container",4),g()),e&2){let t=d();i(),a("ngIf",t.traditionItems.length===0),i(),a("ngIf",t.traditionItems.length>0)}}var L=class e{constructor(n,t,u,m){this.cdr=n;this.traditionService=t;this.sanitizer=u;this.authService=m}traditionItems=[];selectedTraditionItem=null;safeFullContent=null;isAdmin=!1;loading=!0;error="";ngOnInit(){this.authService.currentUser$.pipe(T(n=>n?.role==="admin")).subscribe(n=>{this.isAdmin=n}),this.fetchTraditionItems()}fetchTraditionItems(){this.loading=!0,this.error="",this.traditionService.getAllTraditionItems().subscribe({next:n=>{this.traditionItems=n,this.loading=!1,console.log("\u05E4\u05E8\u05D9\u05D8\u05D9 \u05DE\u05E1\u05D5\u05E8\u05EA \u05E0\u05D8\u05E2\u05E0\u05D5 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4:",this.traditionItems),this.cdr.detectChanges(),this.traditionItems.length>0},error:n=>{this.error="\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D8\u05E2\u05D9\u05E0\u05EA \u05E4\u05E8\u05D9\u05D8\u05D9 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA. \u05D0\u05E0\u05D0 \u05E0\u05E1\u05D4 \u05E9\u05D5\u05D1 \u05DE\u05D0\u05D5\u05D7\u05E8 \u05D9\u05D5\u05EA\u05E8.",this.loading=!1,console.error("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E9\u05DC\u05D9\u05E4\u05EA \u05E4\u05E8\u05D9\u05D8\u05D9 \u05DE\u05E1\u05D5\u05E8\u05EA:",n)}})}selectTopic(n){let t=this.traditionItems.find(u=>u.id?.toString()===n);t&&(this.selectedTraditionItem=t,this.selectedTraditionItem.full_content?this.safeFullContent=this.sanitizer.bypassSecurityTrustHtml(this.selectedTraditionItem.full_content):this.safeFullContent=null)}deleteTraditionItem(n){confirm("\u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05D1\u05D8\u05D5\u05D7 \u05E9\u05D1\u05E8\u05E6\u05D5\u05E0\u05DA \u05DC\u05DE\u05D7\u05D5\u05E7 \u05E4\u05E8\u05D9\u05D8 \u05DE\u05E1\u05D5\u05E8\u05EA \u05D6\u05D4?")&&this.traditionService.deleteTraditionItem(n).subscribe({next:()=>{alert("\u05E4\u05E8\u05D9\u05D8 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA \u05E0\u05DE\u05D7\u05E7 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4."),this.fetchTraditionItems()},error:t=>{console.error("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05DE\u05D7\u05D9\u05E7\u05EA \u05E4\u05E8\u05D9\u05D8 \u05DE\u05E1\u05D5\u05E8\u05EA:",t),alert("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05DE\u05D7\u05D9\u05E7\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D4\u05DE\u05E1\u05D5\u05E8\u05EA.")}})}getFullImageUrl(n){if(!n)return"https://placehold.co/600x400/cccccc/333333?text=\u05D0\u05D9\u05DF+\u05EA\u05DE\u05D5\u05E0\u05D4";let t=F;return n.startsWith("http://")||n.startsWith("https://")?n:`${t}${n}`}static \u0275fac=function(t){return new(t||e)(_(P),_(V),_(k),_(z))};static \u0275cmp=O({type:e,selectors:[["app-tradition"]],decls:6,vars:3,consts:[[1,"tradition-container"],[1,"tradition-title"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],[1,"loading-message"],[1,"error-message"],[3,"click"],["class","no-items-message",4,"ngIf"],[1,"no-items-message"],[1,"tradition-summary"],[1,"text-container"],[1,"img-container"],["onerror","this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=\u05D0\u05D9\u05DF+\u05EA\u05DE\u05D5\u05E0\u05D4';",1,"img-logo",3,"src","alt"],[1,"tradition-tabs"],[3,"active","click",4,"ngFor","ngForOf"],[1,"tradition-content"],[3,"innerHTML"],[1,"read-more-section"],[1,"read-more-button",3,"routerLink"],[1,"action-button","edit-button",3,"routerLink"],[1,"action-button","delete-button",3,"click"]],template:function(t,u){t&1&&(r(0,"div",0)(1,"h2",1),c(2,"\u05D4\u05DE\u05E1\u05D5\u05E8\u05EA \u05D4\u05D9\u05D4\u05D5\u05D3\u05D9\u05EA"),o(),l(3,R,3,0,"div",2)(4,$,5,1,"div",3)(5,Z,3,2,"ng-container",4),o()),t&2&&(i(3),a("ngIf",u.loading),i(),a("ngIf",u.error),i(),a("ngIf",!u.loading&&!u.error))},dependencies:[y,S,w,A],styles:[".tradition-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem;background-color:#f7fafc;border-radius:1rem;box-shadow:0 4px 12px #0000001a;direction:rtl;text-align:right;font-family:Inter,sans-serif}.tradition-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;color:#2d3748;margin-bottom:1.5rem;font-weight:700}.tradition-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:nth-of-type(2){font-size:1.8rem;color:#333;margin-bottom:1rem;text-align:right}.tradition-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:1rem;color:#4a5568;margin-bottom:1.5rem;gap:1.5rem}@media (min-width: 768px){.tradition-summary[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start;gap:2rem}}.text-container[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}@media (min-width: 768px){.text-container[_ngcontent-%COMP%]{width:60%;margin-bottom:0}}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.7}.img-container[_ngcontent-%COMP%]{width:100%;height:auto;max-height:200px;display:flex;justify-content:center;align-items:center}@media (min-width: 768px){.img-container[_ngcontent-%COMP%]{width:40%;max-height:none}}.img-logo[_ngcontent-%COMP%]{padding:1rem;width:100%;height:100%;object-fit:contain}.tradition-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:.8rem;margin-bottom:1.5rem;padding:.5rem 0}.tradition-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:9999px;background-color:#e2e8f0;cursor:pointer;font-weight:700;color:#4a5568;transition:background-color .3s ease,color .3s ease;white-space:nowrap}.tradition-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#805ad5;color:#fff;box-shadow:0 2px 5px #0003}.tradition-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){background-color:#cbd5e0}.tradition-content[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;border-radius:.5rem;box-shadow:0 2px 8px #0000001a}.tradition-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.7rem;color:#2d3748;margin-bottom:.8rem;text-align:right;font-weight:700}.tradition-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#4a5568;line-height:1.7;text-align:right}.read-more-section[_ngcontent-%COMP%]{text-align:left;margin-top:1.5rem}.read-more-button[_ngcontent-%COMP%]{margin:.5rem;background-color:#3b82f6;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:9999px;cursor:pointer}.read-more-button[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px)}.loading-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .no-items-message[_ngcontent-%COMP%]{text-align:center;padding:20px;margin:20px 0;border-radius:8px;font-size:1.1em}.loading-message[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#00796b;border:1px solid #b2ebf2}.error-message[_ngcontent-%COMP%]{background-color:#ffe0b2;color:#e65100;border:1px solid #ffcc80}.error-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#e65100;color:#fff;border:none;padding:10px 15px;border-radius:5px;cursor:pointer;margin-top:10px;font-size:.9em;transition:background-color .3s ease}.error-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ff7043}.no-items-message[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#555;border:1px solid #ddd}@media (max-width: 768px){.tradition-container[_ngcontent-%COMP%]{padding:1rem;margin:1rem auto}.tradition-title[_ngcontent-%COMP%]{font-size:clamp(1.8rem,6vw,2.2rem)}.tradition-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:clamp(1.4rem,5vw,1.7rem)}.tradition-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(.95rem,3vw,1.05rem)}}.delete-button[_ngcontent-%COMP%]{border-radius:1rem;background-color:#dc3545;color:#fff;padding:.3rem 1rem;border:none;border-radius:9999px;cursor:pointer}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.edit-button[_ngcontent-%COMP%]{margin:.5rem;background-color:#4fc978;color:#fff;padding:.5rem 1rem;border:none;border-radius:9999px;cursor:pointer}"]})};export{L as Tradition};
