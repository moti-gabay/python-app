import './polyfills.server.mjs';
import{a as y}from"./chunk-NP7XGUYJ.mjs";import{a as A}from"./chunk-7DHB3WUD.mjs";import{m as S}from"./chunk-236UXOAS.mjs";import{Ga as D,Gb as p,Gc as k,Ja as i,Na as d,Sa as v,Vb as E,Wa as m,Y as g,Z as w,fb as c,gb as s,hb as r,ib as _,lb as b,mb as x,n as f,nb as u,oc as I,pc as N,sc as C,xb as a,yb as l,zb as h}from"./chunk-NAM2BA6S.mjs";import"./chunk-T55IDOPT.mjs";var P=t=>["/news",t],T=t=>["/edit-news",t];function L(t,e){if(t&1&&(s(0,"a",16),a(1,"\u05E2\u05E8\u05D9\u05DB\u05EA \u05D4\u05DB\u05EA\u05D1\u05D4 \u2192"),r()),t&2){let n=u().$implicit;c("routerLink",p(1,T,n.id))}}function $(t,e){if(t&1){let n=b();s(0,"button",17),x("click",function(){g(n);let F=u().$implicit,M=u();return w(M.deleteNewsItem(F.id))}),a(1,"\u05DE\u05D7\u05E7"),r()}}function R(t,e){if(t&1&&(s(0,"div",6),_(1,"img",7),s(2,"div",8)(3,"h3",9),a(4),r(),s(5,"p",10),a(6),r(),s(7,"div",11)(8,"span",12),a(9),r(),s(10,"a",13),a(11,"\u05DC\u05DB\u05EA\u05D1\u05D4 \u05D4\u05DE\u05DC\u05D0\u05D4 \u2192"),r(),m(12,L,2,3,"a",14)(13,$,2,0,"button",15),r()()()),t&2){let n=e.$implicit,o=u();i(),c("src",o.getFullImageUrl(n.image_url),D),i(3),l(n.title),i(2),l(n.description),i(3),l(n.timeAgo),i(),c("routerLink",p(7,P,n.id)),i(2),c("ngIf",o.isAdmin),i(),c("ngIf",o.isAdmin)}}function j(t,e){t&1&&(s(0,"div",18),a(1," \u05D0\u05D9\u05DF \u05D7\u05D3\u05E9\u05D5\u05EA \u05DC\u05D4\u05E6\u05D2\u05D4 \u05DB\u05E8\u05D2\u05E2. "),r())}function B(t,e){t&1&&(s(0,"div",19),a(1," \u05D8\u05D5\u05E2\u05DF \u05D7\u05D3\u05E9\u05D5\u05EA... "),r())}function V(t,e){if(t&1&&(s(0,"div",20),a(1),r()),t&2){let n=u();i(),h(" ",n.error," ")}}var O=class t{constructor(e,n,o){this.newsService=e;this.cdr=n;this.authService=o}news=[];loading=!1;error="";isAdmin=!1;ngOnInit(){this.authService.currentUser$.pipe(f(e=>e?.role==="admin")).subscribe(e=>{this.isAdmin=e}),this.fetchNews()}fetchNews(){this.loading=!1,this.error="",this.newsService.getNews().subscribe({next:e=>{this.news=e,this.loading=!1,this.cdr.detectChanges(),console.log("\u05D7\u05D3\u05E9\u05D5\u05EA \u05E0\u05D8\u05E2\u05E0\u05D5 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4:",this.news)},error:e=>{this.error="\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D8\u05E2\u05D9\u05E0\u05EA \u05D4\u05D7\u05D3\u05E9\u05D5\u05EA. \u05D0\u05E0\u05D0 \u05E0\u05E1\u05D4 \u05E9\u05D5\u05D1 \u05DE\u05D0\u05D5\u05D7\u05E8 \u05D9\u05D5\u05EA\u05E8.",this.loading=!1,console.error("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E9\u05DC\u05D9\u05E4\u05EA \u05D7\u05D3\u05E9\u05D5\u05EA:",e)}})}deleteNewsItem(e){confirm("\u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05D1\u05D8\u05D5\u05D7 \u05E9\u05D1\u05E8\u05E6\u05D5\u05E0\u05DA \u05DC\u05DE\u05D7\u05D5\u05E7 \u05DB\u05EA\u05D1\u05D4 \u05D6\u05D5?")&&this.newsService.deleteNewsItem(e).subscribe({next:()=>{alert("\u05D4\u05DB\u05EA\u05D1\u05D4 \u05E0\u05DE\u05D7\u05E7\u05D4 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4."),this.fetchNews()},error:n=>{console.error("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05DE\u05D7\u05D9\u05E7\u05EA \u05DB\u05EA\u05D1\u05D4:",n),alert("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05DE\u05D7\u05D9\u05E7\u05EA \u05D4\u05DB\u05EA\u05D1\u05D4.")}})}getFullImageUrl(e){if(!e)return"https://placehold.co/400x200/cccccc/333333?text=\u05D0\u05D9\u05DF+\u05EA\u05DE\u05D5\u05E0\u05D4";let n=k;return e.startsWith("http://")||e.startsWith("https://")?e:`${n}${e}`}static \u0275fac=function(n){return new(n||t)(d(y),d(E),d(A))};static \u0275cmp=v({type:t,selectors:[["app-news"]],decls:7,vars:4,consts:[[1,"news-page-container"],[1,"news-title"],["class","news-item",4,"ngFor","ngForOf"],["class","no-news-message",4,"ngIf"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"news-item"],["alt","\u05EA\u05DE\u05D5\u05E0\u05D4",1,"news-image",3,"src"],[1,"news-content"],[1,"news-item-title"],[1,"news-description"],[1,"news-footer"],[1,"news-time"],[1,"news-link",3,"routerLink"],["class","action-button edit-button",3,"routerLink",4,"ngIf"],["class","action-button delete-button",3,"click",4,"ngIf"],[1,"action-button","edit-button",3,"routerLink"],[1,"action-button","delete-button",3,"click"],[1,"no-news-message"],[1,"loading-message"],[1,"error-message"]],template:function(n,o){n&1&&(s(0,"div",0)(1,"h2",1),a(2,"\u05D7\u05D3\u05E9\u05D5\u05EA \u05D5\u05E4\u05E8\u05E1\u05D5\u05DE\u05D9\u05DD"),r(),m(3,R,14,9,"div",2)(4,j,2,0,"div",3)(5,B,2,0,"div",4)(6,V,2,1,"div",5),r()),n&2&&(i(3),c("ngForOf",o.news),i(),c("ngIf",o.news.length===0&&!o.loading&&!o.error),i(),c("ngIf",o.loading),i(),c("ngIf",o.error))},dependencies:[C,I,N,S],styles:[".news-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap;gap:.5rem}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;padding:.3rem 1rem;border:none;border-radius:9999px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:translateY(-2px)}.edit-button[_ngcontent-%COMP%]{background-color:#4fc978;color:#fff;padding:.5rem 1rem;border:none;border-radius:9999px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.edit-button[_ngcontent-%COMP%]:hover{background-color:#3da466;transform:translateY(-2px)}.read-more-button[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;background-color:#3b82f6;color:#fff;padding:.5rem 1rem;border:none;border-radius:9999px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.read-more-button[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px)}"]})};export{O as News};
