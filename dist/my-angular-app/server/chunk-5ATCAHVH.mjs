import './polyfills.server.mjs';
import{a as I}from"./chunk-6W6RBRIQ.mjs";import{a as y}from"./chunk-NLIWIRCN.mjs";import"./chunk-CNGXL7A2.mjs";import{$b as M,Db as r,Eb as D,Gb as E,Hb as w,Ka as s,Mb as O,Nb as h,Oa as m,Pb as _,Ta as b,Xa as g,Y as l,Z as v,jb as u,kb as i,lb as o,mb as C,rb as f,sb as x,tb as d,tc as P,uc as A,vc as S,xc as k,yc as T}from"./chunk-7E6QDHKM.mjs";import"./chunk-T55IDOPT.mjs";var $=c=>({"approved-event-card":!0,active:c});function B(c,t){if(c&1){let e=f();i(0,"div",4),x("click",function(){let a=l(e).$implicit,p=d();return v(p.selectEvent(a))}),i(1,"strong"),r(2),o(),i(3,"span"),r(4),o(),i(5,"span"),r(6),h(7,"date"),o()()}if(c&2){let e=t.$implicit,n=d();u("ngClass",O(8,$,(n.selectedEvent==null?null:n.selectedEvent._id)===e._id)),s(2),D(e.title),s(2),D(e.location),s(2),E("",e.time," ",_(7,5,e.date,"shortDate"))}}function V(c,t){c&1&&(i(0,"div",11),r(1," \u05D4\u05E8\u05E9\u05DE\u05EA\u05DA \u05D4\u05EA\u05E7\u05D1\u05DC\u05D4, \u05EA\u05D5\u05D3\u05D4. \u05DC\u05E2\u05D3\u05DB\u05D5\u05E0\u05D9\u05DD "),i(2,"a",12),r(3,"\u05DC\u05D7\u05E5 \u05DB\u05D0\u05DF"),o(),r(4,". "),o())}function R(c,t){if(c&1){let e=f();i(0,"div",5)(1,"div",6),r(2),h(3,"date"),C(4,"br"),i(5,"p"),r(6),o()(),i(7,"div",7)(8,"button",8),x("click",function(){l(e);let a=d();return v(a.unregisterToEvent(a.selectedEvent._id))}),r(9,"\u05DC\u05D0 \u05D0\u05D5\u05DB\u05DC \u05DC\u05D4\u05D2\u05D9\u05E2"),o(),i(10,"button"),r(11,"\u05D0\u05E2\u05D3\u05DB\u05DF \u05D1\u05D4\u05DE\u05E9\u05DA"),o(),i(12,"button",8),x("click",function(){l(e);let a=d();return v(a.registerToEvent(a.selectedEvent._id))}),r(13,"\u05D0\u05E0\u05D9 \u05D0\u05D2\u05D9\u05E2!"),o()(),g(14,V,5,0,"div",9),i(15,"div",10),r(16,"\u{1F4C5}"),o()()}if(c&2){let e=d();s(2),w(" \u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05DE\u05D0\u05E9\u05E8 \u05D4\u05D2\u05E2\u05D4 \u05DC\u05D0\u05D9\u05E8\u05D5\u05E2 ",e.selectedEvent.title," \u05D1\u05EA\u05D0\u05E8\u05D9\u05DA ",_(3,6,e.selectedEvent.date,"shortDate")," \u05D1\u05E9\u05E2\u05D4 ",e.selectedEvent.time,"? "),s(4),E("\u05E8\u05E9\u05D5\u05DE\u05D9\u05DD \u05E0\u05DB\u05D5\u05DF \u05DC\u05E8\u05D2\u05E2 \u05D6\u05D4 ",(e.selectedEvent.registered_users==null?null:e.selectedEvent.registered_users.length)||0," / ",e.selectedEvent.needed_volunteers," "),s(8),u("ngIf",e.confirmationMessage)}}var z=class c{constructor(t,e,n){this.eventService=t;this.authService=e;this.cdr=n}approvedEvents=[];selectedEvent=null;confirmationMessage="";currentUser;ngOnInit(){this.fetchApprovedEvents(),this.authService.currentUser$.subscribe(t=>this.currentUser=t)}fetchApprovedEvents(){this.eventService.getApprovedEvents().subscribe({next:t=>{let e=new Date;this.approvedEvents=t.filter(n=>{if(!n.date||!n.time)return!1;let a=`${n.date}T${n.time}`;return new Date(a)>e}),this.approvedEvents.sort((n,a)=>{let p=new Date(`${n.date}T${n.time}`).getTime(),F=new Date(`${a.date}T${a.time}`).getTime();return p-F}),this.cdr.detectChanges()},error:t=>console.error("Error loading approved events",t)})}unapproveEvent(t){confirm("\u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05D1\u05D8\u05D5\u05D7 \u05E9\u05D1\u05E8\u05E6\u05D5\u05E0\u05DA \u05DC\u05D1\u05D8\u05DC \u05D0\u05EA \u05D0\u05D9\u05E9\u05D5\u05E8 \u05D4\u05D2\u05E2\u05D4 \u05DC\u05D0\u05D9\u05E8\u05D5\u05E2?")&&this.eventService.unapproveEvent(t).subscribe({next:()=>this.fetchApprovedEvents(),error:e=>alert("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D1\u05D9\u05D8\u05D5\u05DC \u05D0\u05D9\u05E9\u05D5\u05E8 \u05D4\u05D0\u05D9\u05E8\u05D5\u05E2")})}selectEvent(t){this.selectedEvent=t}registerToEvent(t){if(t===void 0){console.error("\u05D0\u05D9\u05E8\u05D5\u05E2 \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8");return}confirm("\u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05D1\u05D8\u05D5\u05D7 \u05E9\u05D1\u05E8\u05E6\u05D5\u05E0\u05DA \u05DC\u05D4\u05E8\u05E9\u05DD \u05DC\u05D0\u05D9\u05E8\u05D5\u05E2?")&&this.eventService.registerToEvent(t).subscribe({next:()=>{this.fetchApprovedEvents(),alert("\u05E8\u05E9\u05DE\u05EA \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4")},error:e=>{alert("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E8\u05E9\u05DE\u05D4 \u05DC\u05D0\u05D9\u05E8\u05D5\u05E2"),console.log(e)}})}unregisterToEvent(t){if(t===void 0){console.error("\u05D0\u05D9\u05E8\u05D5\u05E2 \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8");return}confirm("\u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05D1\u05D8\u05D5\u05D7 \u05E9\u05D1\u05E8\u05E6\u05D5\u05E0\u05DA \u05DC\u05D1\u05D8\u05DC \u05D4\u05D2\u05E2\u05D4?")&&this.eventService.unregisterToEvent(t).subscribe({next:()=>{this.fetchApprovedEvents,alert("\u05D4\u05E8\u05D9\u05E9\u05D5\u05DD \u05D1\u05D5\u05D8\u05DC \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4")},error:e=>{alert("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D1\u05D9\u05D8\u05D5\u05DC \u05D4\u05E8\u05D9\u05E9\u05D5\u05DD"),console.log(e)}})}static \u0275fac=function(e){return new(e||c)(m(I),m(y),m(M))};static \u0275cmp=b({type:c,selectors:[["app-approved-events"]],decls:6,vars:2,consts:[[1,"container"],[1,"sidebar"],["class","event-item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","chat-box",4,"ngIf"],[1,"event-item",3,"click","ngClass"],[1,"chat-box"],[1,"chat-message"],[1,"response-buttons"],[3,"click"],["class","confirmation",4,"ngIf"],[1,"footer-icon"],[1,"confirmation"],["href","#"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),r(3,"\u05DC\u05D5\u05D7 \u05D0\u05D9\u05E8\u05D5\u05E2\u05D9\u05DD"),o(),g(4,B,8,10,"div",2),o(),g(5,R,17,9,"div",3),o()),e&2&&(s(4),u("ngForOf",n.approvedEvents),s(),u("ngIf",n.selectedEvent))},dependencies:[T,P,A,S,k],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;min-height:calc(100vh - var(--navbar-height, 64px));font-family:Arial,sans-serif;background-color:#f6f6f6;padding:1rem;box-sizing:border-box;direction:rtl;text-align:right}@media (min-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:row;justify-content:center;align-items:flex-start;gap:20px;padding:20px}}.sidebar[_ngcontent-%COMP%]{width:100%;height:auto;overflow-y:auto;max-height:30rem;background-color:#f8f2f9;padding:20px;border-radius:10px;border-left:none;margin-bottom:20px;box-shadow:0 2px 5px #0000001a}@media (min-width: 768px){.sidebar[_ngcontent-%COMP%]{width:300px;height:calc(100vh - 100px);border-left:1px solid #ddd;margin-bottom:0}}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;color:#333;font-weight:700}.event-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:15px;cursor:pointer;padding:10px;border-radius:10px;transition:background-color .2s ease-in-out;border:1px solid transparent}.event-item[_ngcontent-%COMP%]:hover{background-color:#e0d7f7}.event-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:5px}.event-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.chat-box[_ngcontent-%COMP%]{width:100%;height:auto;min-height:300px;background-color:#fff;border-radius:10px;display:flex;flex-direction:column;align-items:center;padding:20px;box-shadow:0 2px 5px #0000001a}@media (min-width: 768px){.chat-box[_ngcontent-%COMP%]{width:600px;height:calc(100vh - 100px);min-height:auto}}.chat-message[_ngcontent-%COMP%]{background-color:#b3dbf7;padding:15px;border-radius:20px;max-width:90%;margin-bottom:15px;font-size:16px;text-align:right;line-height:1.6}.response-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-bottom:15px;max-width:90%}.response-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#e3d2f7;border:none;border-radius:20px;padding:8px 16px;cursor:pointer;font-size:14px;transition:background-color .2s;flex-grow:1;min-width:120px}.response-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c7b3f7}.confirmation[_ngcontent-%COMP%]{font-size:14px;color:#333;text-align:center}.confirmation[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#09f;text-decoration:underline;cursor:pointer}.footer-icon[_ngcontent-%COMP%]{margin-top:auto;text-align:center;color:#666;font-size:24px}.events-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:20px}.approved-event-card[_ngcontent-%COMP%]{border:2px solid #ccc;padding:15px;margin-bottom:20px;border-radius:10px;cursor:pointer;transition:all .3s ease}.approved-event-card.active[_ngcontent-%COMP%]{border-color:#2196f3;background-color:#e3f2fd;box-shadow:0 0 10px #0003}"]})};export{z as ApprovedEventsComponent};
